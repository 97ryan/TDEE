:root {
  --bg: #0f1116;
  --card: #171a21;
  --text: #e7e7ea;
  --muted: #a1a1ab;
  --accent: #5cc8ff;
  --accent-soft: rgba(92,200,255,0.15);
  --danger: #ff6b6b;
  --line: #2a2f3a;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0; padding: 0 0 env(safe-area-inset-bottom);
  font-family: -apple-system, system-ui, Segoe UI, Roboto, Inter, Helvetica, Arial, sans-serif;
  color: var(--text); background: var(--bg);
}
header { padding: 16px 16px 0; }
h1 { margin: 8px 0 0; font-size: 1.6rem; }
.sub { margin: 4px 0 16px; color: var(--muted); }

main { padding: 16px; display: grid; gap: 16px; }
.card {
  background: var(--card); border: 1px solid var(--line);
  border-radius: 12px; padding: 16px;
}
.card.highlight {
  border-color: var(--accent);
  box-shadow: 0 0 0 1px var(--accent-soft) inset, 0 6px 22px rgba(0,0,0,0.25);
}
h2 { margin-top: 0; font-size: 1.2rem; }
h3 { margin: 8px 0; font-size: 1rem; color: var(--muted); }

.grid { display: grid; gap: 12px; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); }
label { display: grid; gap: 6px; font-weight: 600; }
.hint { font-weight: 400; color: var(--muted); margin-left: 6px; }
.small { font-size: 0.9rem; }
.muted { color: var(--muted); }

.tdee-hero {
  display: flex; align-items: baseline; gap: 8px;
  font-weight: 800; letter-spacing: 0.5px;
}
#currentTDEE { font-size: 2.0rem; }
.unit { font-size: 1rem; color: var(--muted); }

input[type="date"], input[type="number"] {
  padding: 10px 12px; border-radius: 10px; border: 1px solid var(--line);
  background: #0d1016; color: var(--text);
}
/* Hide native file inputs; trigger via buttons for clean layout */
.hidden-file {
  position: absolute !important;
  width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden;
  clip: rect(0,0,0,0); clip-path: inset(50%); border: 0;
}

button {
  background: var(--accent); color: #0b0b0d; font-weight: 700;
  border: none; padding: 10px 14px; border-radius: 10px; cursor: pointer;
}
button.danger { background: var(--danger); color: #0b0b0d; }
button.large { padding: 12px 18px; font-size: 1rem; }
button:disabled { opacity: 0.5; }

.file-grid button { width: 100%; }

#history {
  margin-top: 12px; border-top: 1px dashed var(--line); padding-top: 8px;
}
.entry-row {
  display: grid; grid-template-columns: 1fr auto auto auto;
  gap: 8px; align-items: center; padding: 6px 0; border-bottom: 1px dashed var(--line);
}
.entry-row:last-child { border-bottom: none; }
.entry-row button { padding: 6px 10px; border-radius: 8px; font-size: 0.85rem; }

.chart { width: 100%; height: 240px; display: block; }
.chart-block { margin-bottom: 10px; }

.export { background: #0d1016; padding: 10px; border-radius: 10px; overflow: auto; max-height: 200px; }

.danger-card { border-color: var(--danger); box-shadow: 0 0 0 1px rgba(255,107,107,0.15) inset; }

footer { padding: 8px 16px 20px; color: var(--muted); }

@media (min-width: 900px) {
  main { grid-template-columns: 1fr 1fr; }
  main > .card:nth-child(4) { grid-column: 1 / -1; }
}


/* mini summary boxes */
.mini-metrics { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px,1fr)); gap: 12px; margin-top: 8px; }
.mini-card { border: 1px solid var(--line); border-radius: 10px; padding: 10px 12px; background: #12161d; }
.mini-title { color: var(--muted); font-size: 0.9rem; margin-bottom: 4px; }
.mini-value { font-weight: 800; font-size: 1.1rem; letter-spacing: 0.3px; }
.delta-pos { color: #8ef18e; }
.delta-neg { color: var(--danger); }
